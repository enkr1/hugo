{{/* JSON-LD Structured Data for SEO */}}

{{/* Website Schema - Homepage only */}}
{{ if .IsHome }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "{{ .Site.Title | safeJS }}",
  "url": "{{ .Site.BaseURL | safeJS }}",
  "description": "{{ .Site.Params.description | safeJS }}",
  "author": {
    "@type": "Person",
    "name": "Jing Hui PANG"
  },
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": "{{ .Site.BaseURL | safeJS }}search/?q={search_term_string}"
    },
    "query-input": "required name=search_term_string"
  }
}
</script>
{{ end }}

{{/* Article Schema - Posts and Journals */}}
{{ if and .IsPage (or (eq .Section "posts") (eq .Section "journals")) }}
{{- $description := .Summary | plainify | truncate 160 -}}
{{- with .Description }}{{ $description = . }}{{ end -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": {{ if eq .Section "journals" }}"Article"{{ else }}"BlogPosting"{{ end }},
  "headline": "{{ .Title | safeJS }}",
  "description": "{{ $description | safeJS }}",
  "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
  "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
  "author": {
    "@type": "Person",
    "name": "Jing Hui PANG",
    "url": "{{ .Site.BaseURL | safeJS }}about/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ .Site.Title | safeJS }}",
    "url": "{{ .Site.BaseURL | safeJS }}"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink | safeJS }}"
  }
  {{- with .Params.image }},
  "image": "{{ $.Site.BaseURL | safeJS }}{{ . | safeJS }}"
  {{- end }}
  {{- if .Params.tags }},
  "keywords": {{ .Params.tags | jsonify | safeJS }}
  {{- end }}
}
</script>

{{/* Breadcrumb Schema */}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ .Site.BaseURL | safeJS }}"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{{ .Section | title | safeJS }}",
      "item": "{{ .Site.BaseURL | safeJS }}{{ .Section }}/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ .Title | safeJS }}",
      "item": "{{ .Permalink | safeJS }}"
    }
  ]
}
</script>
{{ end }}

{{/* Person Schema - About page */}}
{{ with .File }}{{ if and (eq .LogicalName "index.md") (eq .Dir "page/about/") }}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Jing Hui PANG",
  "alternateName": ["ENKR", "彭竞辉"],
  "url": "{{ $.Permalink | safeJS }}",
  "sameAs": [
    "https://github.com/enkr1",
    "https://www.linkedin.com/in/pang-jing-hui/"
  ],
  "jobTitle": "Software Engineer",
  "worksFor": {
    "@type": "Organization",
    "name": "ByteDance"
  }
}
</script>
{{ end }}{{ end }}
